inherits: shared.yaml
group: group1
sources:
  - "*.xlsx"
  - "*.xls"
  - "*.pdf"

# Fields to preserve when falling back to legacy processing
# These fields come from vendor detection and should not be overwritten
preserve_fields:
  - detected_vendor_code
  - detected_source_type
  - source_file

# Legacy parsed_by marker
parsed_by: "legacy_group1_excel"

vendors:
  Costco:
    identifier: "costco"
    sheet_type: "tabular"
    columns:
      product_name: "Item Name"
      quantity: "Ordered Quantity"
      unit_price: "Cost Unit"
      total_price: "Total Price"
      uom: "Size"
      category: "Department Name"
  JewelOsco:
    identifier: "jewel"
    sheet_type: "tabular"
    columns:
      product_name: "Item"
      quantity: "Qty"
      unit_price: "Unit Price"
      total_price: "Total"
      uom: "Size"
  RD:
    identifier: "restaurant depot"
    sheet_type: "tabular"
    columns:
      product_name: "Item Name"
      quantity: "Qty"
      unit_price: "Price"
      total_price: "Amount"
      uom: "Size"
  Others:
    identifier: "others"
    sheet_type: "tabular"
    columns:
      product_name: "Item Name"
      quantity: "Qty"
      unit_price: "Unit Price"
      total_price: "Total"
      uom: "Size"

normalization:
  trim_whitespace: true
  strip_currency_symbol: true
  auto_detect_uom: true
  skip_empty_rows: true

validation_rules:
  - rule: "sum(items.total_price) ≈ subtotal"
  - rule: "subtotal + sum(fees) ≈ total"
