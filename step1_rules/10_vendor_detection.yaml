vendor_detection:
  description: >
    Detect vendor and source type from file path, filename, and receipt content.
    Adds detected_vendor_code and detected_source_type to every receipt.
  
  # Detection order: filename/path first, then receipt content
  detection_order:
    - filename_path
    - receipt_content
  
  # Vendor identifiers by filename/path patterns
  filename_patterns:
    costco:
      patterns:
        - "costco"
      vendor_code: "COSTCO"
      source_type: "localgrocery_based"
      confidence: 0.95
    
    restaurant_depot:
      patterns:
        - "rd"
        - "restaurant depot"
        - "rd_"
      vendor_code: "RD"
      source_type: "localgrocery_based"
      confidence: 0.95
    
    jewel:
      patterns:
        - "jewel"
        - "jewel-osco"
      vendor_code: "JEWEL"
      source_type: "localgrocery_based"
      confidence: 0.90
    
    marianos:
      patterns:
        - "mariano"
      vendor_code: "MARIANOS"
      source_type: "localgrocery_based"
      confidence: 0.90
    
    aldi:
      patterns:
        - "aldi"
      vendor_code: "ALDI"
      source_type: "localgrocery_based"
      confidence: 0.90
    
    parktoshop:
      patterns:
        - "parktoshop"
        - "park to shop"
      vendor_code: "PARKTOSHOP"
      source_type: "localgrocery_based"
      confidence: 0.85
    
    bbi:
      patterns:
        - "bbi"
        - "_bbi_"
        - "uni_il_ut"
      vendor_code: "BBI"
      source_type: "bbi_based"
      confidence: 0.95
    
    amazon:
      patterns:
        - "amazon"
        - "_amazon_"
        - "orders_from_"
        - "112-"
        - "114-"
      vendor_code: "AMAZON"
      source_type: "amazon_based"
      confidence: 0.95
    
    instacart:
      patterns:
        - "instacart"
        - "instarcart"
        - "uni_uni_uptown"
      vendor_code: "INSTACART"
      source_type: "instacart_based"
      confidence: 0.95
  
  # Vendor identifiers by receipt content keywords
  content_keywords:
    costco:
      keywords:
        - "costco"
        - "costco wholesale"
      vendor_code: "COSTCO"
      source_type: "localgrocery_based"
      confidence: 0.85
    
    restaurant_depot:
      keywords:
        - "restaurant depot"
        - "rd "
      vendor_code: "RD"
      source_type: "localgrocery_based"
      confidence: 0.85
    
    jewel:
      keywords:
        - "jewel"
        - "jewel-osco"
        - "jewel osco"
      vendor_code: "JEWEL"
      source_type: "localgrocery_based"
      confidence: 0.80
    
    marianos:
      keywords:
        - "mariano"
        - "mariano's"
      vendor_code: "MARIANOS"
      source_type: "localgrocery_based"
      confidence: 0.80
    
    aldi:
      keywords:
        - "aldi"
      vendor_code: "ALDI"
      source_type: "localgrocery_based"
      confidence: 0.80
    
    parktoshop:
      keywords:
        - "park to shop"
        - "parktoshop"
      vendor_code: "PARKTOSHOP"
      source_type: "localgrocery_based"
      confidence: 0.75
    
    instacart:
      keywords:
        - "instacart"
        - "delivery from"
        - "your order from"
      vendor_code: "INSTACART"
      source_type: "instacart_based"
      confidence: 0.90
  
  # Fallback detection
  fallback:
    default_vendor_code: "UNKNOWN"
    default_source_type: "localgrocery_based"  # Default to localgrocery_based if can't determine
  
  # Folder-based detection (for source_type only)
  folder_patterns:
    instacart_based:
      patterns:
        - "instacart"
        - "instarcart"
      source_type: "instacart_based"
    
    localgrocery_based:
      patterns:
        - "costco"
        - "rd"
        - "restaurant depot"
        - "jewel"
        - "mariano"
      source_type: "localgrocery_based"

