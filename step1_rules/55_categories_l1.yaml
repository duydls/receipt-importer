# Level 1 (L1) Accounting Categories
# High-level categories for financial reporting and P&L statements

categories_l1:
  description: >
    Master list of L1 accounting categories.
    These roll up L2 operational categories for financial reporting.
  
  l1_categories:
    - id: A01
      name: COGS–Ingredients
      description: Cost of goods sold for food and beverage ingredients
      examples:
        - Tea, coffee, matcha
        - Syrups, flavorings, jam, purée
        - Dairy, milk, cream
        - Sweeteners, sugar
        - Toppings, tapioca pearls, boba, jellies
        - Fresh/frozen/canned fruit
        - Fresh/frozen vegetables
        - Grains, starches
    
    - id: A02
      name: COGS–Finished Goods
      description: Cost of goods sold for finished food products ready for sale
      examples:
        - Cakes, mousses, baked goods
        - Frozen prepared snacks and appetizers
        - Ready-to-serve food items
    
    - id: A03
      name: COGS–Packaging
      description: Cost of goods sold for packaging materials
      examples:
        - Cups, lids, sleeves
        - Bags, trays, boxes
        - Straws, utensils
        - Napkins (customer-facing)
        - Labels, stickers
    
    - id: A04
      name: COGS–Non-food Consumables
      description: Non-food items consumed in service (gloves, towels, etc.)
      examples:
        - Gloves (food service)
        - Paper towels (service area)
        - Foil, plastic wrap
        - Filters (coffee, tea)
    
    - id: A05
      name: Smallwares/Equipment
      description: Small equipment and tools (below capitalization threshold)
      examples:
        - Kitchen utensils, tools
        - Small appliances under $500
        - Storage containers
        - Prep equipment
      threshold: 500.00  # USD
    
    - id: A06
      name: Cleaning/Janitorial
      description: Cleaning supplies and janitorial items
      examples:
        - Detergents, sanitizers
        - Cleaning chemicals
        - Mops, brooms, brushes
        - Trash bags
        - Gloves (cleaning)
    
    - id: A07
      name: Office/Admin/Uniform
      description: Office supplies, administrative items, and uniforms
      examples:
        - Paper, pens, printer supplies
        - Tape, scissors, staplers
        - Filing/organization
        - Computer accessories
        - Uniforms and company apparel
    
    - id: A08
      name: Taxes & Fees
      description: Sales tax, regulatory fees, and government charges
      examples:
        - Sales tax
        - State/local taxes
        - Regulatory fees
        - Licensing fees
    
    - id: A09
      name: Shipping/Delivery
      description: Shipping charges and delivery fees
      examples:
        - Shipping charges
        - Freight
        - Delivery fees
        - Handling fees
    
    - id: A10
      name: Tips/Gratuities
      description: Tips and gratuities (Instacart shopper tips, etc.)
      examples:
        - Instacart shopper tip
        - Delivery driver tip
    
    - id: A11
      name: Licenses/Services
      description: Business licenses, subscriptions, and professional services
      examples:
        - Software subscriptions
        - Professional services
        - Maintenance contracts
    
    - id: A12
      name: Repairs/Maintenance
      description: Equipment repairs and facility maintenance
      examples:
        - Equipment repair
        - Facility maintenance
        - Replacement parts
    
    - id: A13
      name: Marketing
      description: Marketing and promotional expenses
      examples:
        - Promotional materials
        - Advertising
        - Marketing supplies
    
    - id: A14
      name: Utilities
      description: Utilities and facility costs
      examples:
        - Water, gas, electric (if on receipts)
        - Facility services
    
    - id: A99
      name: Other/Unmapped
      description: Items that don't fit other categories or need review
      examples:
        - Unclassified items
        - Items needing manual review
  
  # L2 → L1 Mapping
  # Central place to define how L2 operational categories roll up to L1 accounting categories
  l2_to_l1_map:
    # Ingredients (A01)
    C01: A01  # Tea & Coffee
    C02: A01  # Syrups
    C03: A01  # Jam/Purée
    C04: A01  # Dairy & Milk
    C05: A01  # Sweeteners/Sugar
    C06: A01  # Creamer & Powders
    C07: A01  # Grains & Starches
    C08: A01  # Toppings & Jellies
    C09: A01  # Fresh Fruit
    C10: A01  # Frozen Fruit
    C11: A01  # Canned/Processed Fruit
    C12: A01  # Seasonings & Marinades
    C13: A01  # Frozen Vegetables
    C14: A01  # Meat & Seafood
    C15: A01  # Other Ingredients
    C16: A01  # Fresh Vegetables
    C33: A01  # Retail Snacks & Beverages (resale items)
    
    # Finished Goods (A02)
    C20: A02  # Cakes & Mousse
    C21: A02  # Frozen Snacks
    
    # Packaging (A03)
    C22: A03  # Utensils & Misc Packaging
    C23: A03  # Labels & Stickers
    C24: A03  # Bags & Trays
    C26: A03  # Cups & Lids
    
    # Non-food Consumables (A04)
    C30: A04  # Napkins & Paper Products (service)
    C31: A04  # Gloves & Food Service Supplies
    C32: A04  # Filters & Disposables
    
    # Smallwares/Equipment (A05)
    C40: A05  # Smallwares & Equipment
    
    # Cleaning (A06)
    C50: A06  # Cleaning & Chemicals
    
    # Office (A07)
    C60: A07  # Office/Admin/Uniform
    
    # Taxes (A08)
    C70: A08  # Taxes & Fees
    
    # Shipping (A09)
    C80: A09  # Shipping/Delivery
    
    # Tips (A10)
    C85: A10  # Tips/Gratuities
    
    # Services (A11)
    C90: A11  # Licenses/Services
    
    # Repairs (A12)
    C91: A12  # Repairs/Maintenance
    
    # Marketing (A13)
    C92: A13  # Marketing
    
    # Discounts/Promos (map to A01 - reduces COGS)
    C95: A01  # Discounts/Promos
    
    # Unknown (A99)
    C99: A99  # Unknown
  
  # Special Overrides
  # These patterns force specific L1 categories regardless of other rules
  
  tax_overrides:
    description: >
      Regex patterns that force L1=A07 (Taxes & Fees).
      Applied to product_name and fee item names.
    map_to_l2: C70  # Taxes & Fees
    patterns:
      - '(?i)\btax\b'
      - '(?i)\btaxes\b'
      - '(?i)sales\s+tax'
      - '(?i)state\s+tax'
      - '(?i)local\s+tax'
      - '(?i)item\s+tax'
      - '(?i)shipping\s+tax'
      - '(?i)gift\s+wrap\s+tax'
      - '(?i)\bvat\b'
  
  discount_overrides:
    description: >
      Regex patterns that identify discounts/promotions.
      Maps to L2=C95 (Discounts/Promos) which rolls up via l2_to_l1_map.
    map_to_l2: C95  # Discounts/Promos
    patterns:
      - '(?i)\bdiscount\b'
      - '(?i)\bpromo\b'
      - '(?i)promotion'
      - '(?i)item\s+promo'
      - '(?i)ship\s+promo'
      - '(?i)coupon'
      - '(?i)rebate'
    # Discount items typically have negative total_price
  
  shipping_overrides:
    description: >
      Regex patterns that force L1=A08 (Shipping/Delivery).
      Includes service fees and bag fees as delivery-related charges.
    map_to_l2: C80  # Shipping/Delivery
    patterns:
      - '(?i)shipping'
      - '(?i)freight'
      - '(?i)delivery'
      - '(?i)handling'
      - '(?i)postal\s+fee'
      - '(?i)service\s+fee'
      - '(?i)bag\s+fee'
      - '(?i)checkout\s+bag'
      - '(?i)carrier\s+bag'
      - '(?i)scheduled\s+delivery'
      - '(?i)priority\s+delivery'
      - '(?i)heavy\s+item\s+fee'
  
  tip_overrides:
    description: >
      Regex patterns that force L1=A09 (Tips/Gratuities).
    map_to_l2: C85  # Tips/Gratuities
    patterns:
      - '(?i)\btip\b'
      - '(?i)gratuity'
      - '(?i)shopper\s+tip'
      - '(?i)driver\s+tip'
  
  notes:
    - L1 categories are stable and rarely change
    - L2→L1 mapping can be adjusted in l2_to_l1_map
    - Overrides are applied last and take precedence over all other rules
    - For unmapped items, use L2=C99 → L1=A99

